services:
  nginx-proxy-manager:
    image: "jc21/nginx-proxy-manager:latest"
    container_name: npm
    restart: unless-stopped

    ports:
      - "80:80"
      - "81:81"
      - "443:443"

    networks:
      - proxy

    volumes:
      - npm-data:/data
      - npm-letsencrypt:/etc/letsencrypt

    healthcheck:
      test: ["CMD", "/usr/bin/check-health"]
      interval: 10s
      timeout: 3s

volumes:
  npm-data:
  npm-letsencrypt:

networks:
  proxy:
    external: true
